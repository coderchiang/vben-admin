import{e,B as s,I as t,j as a,g as l,q as o,s as i,v as n,k as r,w as d,K as m,x as u,y as c,z as g,r as f,o as p,m as x,A as y,C as F,n as h,D as v,E as S,p as _,F as C}from"./index.79216f76.js";import{C as w}from"./index.36d4e86c.js";import{C as L,R as b}from"./index.642d4a89.js";import{D as k}from"./index.c97195ef.js";import{F as j}from"./index.93d7395f.js";import"./index.920a8f1f.js";import{_ as I,u as E,a as D,L as R,b as T}from"./LoginFormTitle.7ea0a205.js";import{G}from"./GithubFilled.a14ce1ad.js";import{W as A,A as P,G as z,T as B}from"./WechatFilled.92503e30.js";import"./vendor.afa0338c.js";import"./_baseIteratee.f7d95dea.js";import"./get.091e0743.js";import"./responsiveObserve.c545f1cc.js";var M=e({name:"LoginForm",components:{[L.name]:L,[b.name]:b,Checkbox:w,Button:s,Form:j,FormItem:j.Item,Input:t,Divider:k,LoginFormTitle:I,InputPassword:t.Password,GithubFilled:G,WechatFilled:A,AlipayCircleFilled:P,GoogleCircleFilled:z,TwitterCircleFilled:B},setup(){const{t:e}=a(),{notification:s}=g(),{prefixCls:t}=l("login"),{setLoginState:f,getLoginState:p}=E(),{getFormRules:x}=D(),y=o(null),F=o(!1),h=o(!1),v=i({account:"guest",password:"123456"}),{validForm:S}=T(y);n(["enter"],(e=>{e.keyCode===m.ENTER&&C()}));const _=r((()=>d(p)===R.LOGIN));function C(){return t=this,a=null,l=function*(){const t=yield S();if(t)try{F.value=!0;const a=yield u.login(c({password:t.password,username:t.account}));a&&s.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${a.username}`,duration:3})}finally{F.value=!1}},new Promise(((e,s)=>{var o=e=>{try{n(l.next(e))}catch(t){s(t)}},i=e=>{try{n(l.throw(e))}catch(t){s(t)}},n=s=>s.done?e(s.value):Promise.resolve(s.value).then(o,i);n((l=l.apply(t,a)).next())}));var t,a,l}return{t:e,prefixCls:t,formRef:y,formData:v,getFormRules:x,rememberMe:h,handleLogin:C,loading:F,setLoginState:f,LoginStateEnum:R,getShow:_}}});M.render=function(e,s,t,a,l,o){const i=f("LoginFormTitle"),n=f("Input"),r=f("FormItem"),d=f("InputPassword"),m=f("Checkbox"),u=f("ACol"),c=f("Button"),g=f("ARow"),w=f("Divider"),L=f("GithubFilled"),b=f("WechatFilled"),k=f("AlipayCircleFilled"),j=f("GoogleCircleFilled"),I=f("TwitterCircleFilled"),E=f("Form");return p(),x(C,null,[y(h(i,{class:"enter-x"},null,512),[[F,e.getShow]]),y(h(E,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:v((()=>[h(r,{name:"account",class:"enter-x"},{default:v((()=>[h(n,{size:"large",value:e.formData.account,"onUpdate:value":s[1]||(s[1]=s=>e.formData.account=s),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),h(r,{name:"password",class:"enter-x"},{default:v((()=>[h(d,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":s[2]||(s[2]=s=>e.formData.password=s),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),h(g,{class:"enter-x"},{default:v((()=>[h(u,{span:12},{default:v((()=>[h(r,null,{default:v((()=>[h(m,{checked:e.rememberMe,"onUpdate:checked":s[3]||(s[3]=s=>e.rememberMe=s),size:"small"},{default:v((()=>[S(_(e.t("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),h(u,{span:12},{default:v((()=>[h(r,{style:{"text-align":"right"}},{default:v((()=>[h(c,{type:"link",size:"small",onClick:s[4]||(s[4]=s=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:v((()=>[S(_(e.t("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),h(r,{class:"enter-x"},{default:v((()=>[h(c,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:v((()=>[S(_(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"])])),_:1}),h(g,{class:"enter-x"},{default:v((()=>[h(u,{xs:24,md:8},{default:v((()=>[h(c,{block:"",onClick:s[5]||(s[5]=s=>e.setLoginState(e.LoginStateEnum.MOBILE))},{default:v((()=>[S(_(e.t("sys.login.mobileSignInFormTitle")),1)])),_:1})])),_:1}),h(u,{md:8,xs:24,class:"xs:my-2 md:my-0 xs:mx-0 md:mx-2"},{default:v((()=>[h(c,{block:"",onClick:s[6]||(s[6]=s=>e.setLoginState(e.LoginStateEnum.QR_CODE))},{default:v((()=>[S(_(e.t("sys.login.qrSignInFormTitle")),1)])),_:1})])),_:1}),h(u,{md:7,xs:24},{default:v((()=>[h(c,{block:"",onClick:s[7]||(s[7]=s=>e.setLoginState(e.LoginStateEnum.REGISTER))},{default:v((()=>[S(_(e.t("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),h(w,{class:"enter-x"},{default:v((()=>[S(_(e.t("sys.login.otherSignIn")),1)])),_:1}),h("div",{class:["flex justify-evenly enter-x",`${e.prefixCls}-sign-in-way`]},[h(L),h(b),h(k),h(j),h(I)],2)])),_:1},8,["model","rules"]),[[F,e.getShow]])],64)};export default M;
