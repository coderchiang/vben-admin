import{e,B as a,I as s,j as t,g as l,q as o,s as i,v as n,K as r,k as d,w as m,x as c,y as u,z as g,r as f,o as p,m as x,A as y,C as F,n as h,D as v,E as S,p as _,F as C}from"./index.79216f76.js";import{C as w}from"./index.36d4e86c.js";import{C as L,R as b}from"./index.642d4a89.js";import{D as k}from"./index.c97195ef.js";import{F as j}from"./index.93d7395f.js";import"./index.920a8f1f.js";import{_ as I,u as E,a as D,L as R,b as T}from"./LoginFormTitle.538a95cc.js";import{G}from"./GithubFilled.a14ce1ad.js";import{W as A,A as P,G as z,T as B}from"./WechatFilled.92503e30.js";import"./vendor.afa0338c.js";import"./_baseIteratee.f7d95dea.js";import"./get.091e0743.js";import"./responsiveObserve.c545f1cc.js";var M=e({name:"LoginForm",components:{[L.name]:L,[b.name]:b,Checkbox:w,Button:a,Form:j,FormItem:j.Item,Input:s,Divider:k,LoginFormTitle:I,InputPassword:s.Password,GithubFilled:G,WechatFilled:A,AlipayCircleFilled:P,GoogleCircleFilled:z,TwitterCircleFilled:B},setup(){const{t:e}=t(),{notification:a}=g(),{prefixCls:s}=l("login"),{setLoginState:f,getLoginState:p}=E(),{getFormRules:x}=D(),y=o(null),F=o(!1),h=o(!1),v=i({account:"admin",password:"123456"}),{validForm:S}=T(y);n(["enter"],(e=>{e.keyCode===r.ENTER&&C()}));const _=d((()=>m(p)===R.LOGIN));function C(){return s=this,t=null,l=function*(){const s=yield S();if(s)try{F.value=!0;const t=yield c.login(u({password:s.password,username:s.account}));t&&a.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${t.username}`,duration:3})}finally{F.value=!1}},new Promise(((e,a)=>{var o=e=>{try{n(l.next(e))}catch(s){a(s)}},i=e=>{try{n(l.throw(e))}catch(s){a(s)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(o,i);n((l=l.apply(s,t)).next())}));var s,t,l}return{t:e,prefixCls:s,formRef:y,formData:v,getFormRules:x,rememberMe:h,handleLogin:C,loading:F,setLoginState:f,LoginStateEnum:R,getShow:_}}});M.render=function(e,a,s,t,l,o){const i=f("LoginFormTitle"),n=f("Input"),r=f("FormItem"),d=f("InputPassword"),m=f("Checkbox"),c=f("ACol"),u=f("Button"),g=f("ARow"),w=f("Divider"),L=f("GithubFilled"),b=f("WechatFilled"),k=f("AlipayCircleFilled"),j=f("GoogleCircleFilled"),I=f("TwitterCircleFilled"),E=f("Form");return p(),x(C,null,[y(h(i,{class:"enter-x"},null,512),[[F,e.getShow]]),y(h(E,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef"},{default:v((()=>[h(r,{name:"account",class:"enter-x"},{default:v((()=>[h(n,{size:"large",value:e.formData.account,"onUpdate:value":a[1]||(a[1]=a=>e.formData.account=a),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),h(r,{name:"password",class:"enter-x"},{default:v((()=>[h(d,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":a[2]||(a[2]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),h(g,{class:"enter-x"},{default:v((()=>[h(c,{span:12},{default:v((()=>[h(r,null,{default:v((()=>[h(m,{checked:e.rememberMe,"onUpdate:checked":a[3]||(a[3]=a=>e.rememberMe=a),size:"small"},{default:v((()=>[S(_(e.t("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),h(c,{span:12},{default:v((()=>[h(r,{style:{"text-align":"right"}},{default:v((()=>[h(u,{type:"link",size:"small",onClick:a[4]||(a[4]=a=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:v((()=>[S(_(e.t("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),h(r,{class:"enter-x"},{default:v((()=>[h(u,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:v((()=>[S(_(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"])])),_:1}),h(g,{class:"enter-x"},{default:v((()=>[h(c,{xs:24,md:8},{default:v((()=>[h(u,{block:"",onClick:a[5]||(a[5]=a=>e.setLoginState(e.LoginStateEnum.MOBILE))},{default:v((()=>[S(_(e.t("sys.login.mobileSignInFormTitle")),1)])),_:1})])),_:1}),h(c,{md:8,xs:24,class:"xs:my-2 md:my-0 xs:mx-0 md:mx-2"},{default:v((()=>[h(u,{block:"",onClick:a[6]||(a[6]=a=>e.setLoginState(e.LoginStateEnum.QR_CODE))},{default:v((()=>[S(_(e.t("sys.login.qrSignInFormTitle")),1)])),_:1})])),_:1}),h(c,{md:7,xs:24},{default:v((()=>[h(u,{block:"",onClick:a[7]||(a[7]=a=>e.setLoginState(e.LoginStateEnum.REGISTER))},{default:v((()=>[S(_(e.t("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),h(w,{class:"enter-x"},{default:v((()=>[S(_(e.t("sys.login.otherSignIn")),1)])),_:1}),h("div",{class:["flex justify-evenly enter-x",`${e.prefixCls}-sign-in-way`]},[h(L),h(b),h(k),h(j),h(I)],2)])),_:1},8,["model","rules"]),[[F,e.getShow]])],64)};export default M;
